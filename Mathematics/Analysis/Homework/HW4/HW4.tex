\documentclass[12pt]{article}

\author{Matthew Cocci}
\title{\textbf{Homework 4}}
\date{\today}

%% Spacing %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{fullpage}
\usepackage{setspace}
%\onehalfspacing
\usepackage{microtype}


%% Header %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\pagestyle{fancy} 
%\lhead{}
%\rhead{}
%\chead{}
%\setlength{\headheight}{15.2pt} 
    %---Make the header bigger to avoid overlap

%\renewcommand{\headrulewidth}{0.3pt} 
    %---Width of the line

%\setlength{\headsep}{0.2in}    
    %---Distance from line to text
            

%% Mathematics Related %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{mathrsfs}
\usepackage{amsthm} %allows for labeling of theorems
\theoremstyle{plain}
\newtheorem{thm}{Theorem}[section]
\newtheorem{lem}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}

\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition}
\newtheorem{ex}[thm]{Example}

\theoremstyle{remark}
\newtheorem*{rem}{Remark}
\newtheorem*{note}{Note}


%% Font Choices %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{lmodern}
%\usepackage{blindtext}


%% Figures %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{graphicx}
\usepackage{subfigure} 
    %---For plotting multiple figures at once
%\graphicspath{ {Directory/} }
    %---Set a directory for where to look for figures


%% Hyperlinks %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{hyperref} 
\hypersetup{	
    colorlinks,		
        %---This colors the links themselves, not boxes
    citecolor=black,	
        %---Everything here and below changes link colors
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}

%% Including Code %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\usepackage{verbatim} 
    %---For including verbatim code from files, no colors

\usepackage{listings}
\usepackage{color}
\definecolor{mygreen}{RGB}{28,172,0}
\definecolor{mylilas}{RGB}{170,55,241}
\newcommand{\matlabcode}[1]{%
    \lstset{language=Matlab,%
        basicstyle=\footnotesize,%
        breaklines=true,%
        morekeywords={matlab2tikz},%
        keywordstyle=\color{blue},%
        morekeywords=[2]{1}, keywordstyle=[2]{\color{black}},%
        identifierstyle=\color{black},%
        stringstyle=\color{mylilas},%
        commentstyle=\color{mygreen},%
        showstringspaces=false,%
            %---Without this there will be a symbol in 
            %---the places where there is a space
        numbers=left,%
        numberstyle={\tiny \color{black}},% 
            %---Size of the numbers
        numbersep=9pt,% 
            %---Defines how far the numbers are from the text
        emph=[1]{for,end,break,switch,case},emphstyle=[1]\color{red},%
            %---Some words to emphasise
    }%
    \lstinputlisting{#1}
}
    %---For including Matlab code from .m file with colors,
    %---line numbering, etc. 


%% Misc %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\usepackage{enumitem} 
    %---Has to do with enumeration	
\usepackage{appendix}
%\usepackage{natbib} 
    %---For bibliographies
\usepackage{pdfpages}
    %---For including whole pdf pages as a page in doc


%% User Defined %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

%\newcommand{\nameofcmd}{Text to display}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%% BODY %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 


\begin{document}

\maketitle 

\begin{enumerate}

\item 
\begin{enumerate}
\item \textbf{Exercise 57.7}: We want to show that $f$ continuous on $[a,b]$ with $f(x)=0$ almost everywhere on $[a,b]$ implies that $f(x)=0$ for all $x\in[a,b]$. We'll do so by contradiction.

So suppose that $f(x)=0$ almost everywhere, but there exists an $x\in[a,b]$ such that $f(x)\neq 0$. That means that 
\[ 
    |f(x)| > \varepsilon \qquad \text{for some $\varepsilon>0$}
\]
Then, using this $\varepsilon$, by the continuity of $f$, we know that there exists a $\delta>0$ such that
\[
    |x-y|<\delta \quad \Rightarrow \quad |f(x)-f(y)|<\varepsilon
\]
Now since this is the case, we can say that
\[
    y\in(x-\delta, x+\delta) \quad \Rightarrow \quad 
    f(y) \in \left(f(x)-\varepsilon, f(x)+\varepsilon\right)
\]
Supposing, without loss of generality, that $f(x) > 0$, we have that 
\[
    f(x) > \varepsilon \quad \Rightarrow \quad
    f(x) - \varepsilon > 0
\]
Thus, we can conclude that, $f(y) > 0$ for all $y\in(x-\delta, x+\delta)$.\footnote{A similar result holds if $f(x)<0$, just flip the direction of the inequality.} And since $(x-\delta, x+\delta)$ is an interval, we know from class that it is not measure zero. Therefore, the set of all points where $f(x)=0$ is not measure zero, which contradicts our assumption.

\item \textbf{Exercise 57.8}: We want to show that if $\alpha\in BV([a,b])$, then $\alpha$ is continuous almost everywhere in $[a,b]$.  

Now if we want a cheap proof, we can say that $\alpha$ is of bounded variation, and so it's Riemann Integrable. In that case, by Lebesgue's Theorem, $\alpha$ is continuous almost everywhere, and we're done.

\newpage
\emph{But}, that's kind of cheating. So let's use the hint, which says to prove that a monotonic function has at most countably many points of discontinuity. If we can prove this, then we're done. Here's the steps and results from class that motivate that statement:
\begin{enumerate}
    \item We know from class that our function $\alpha$ of bounded variation can be represented as the difference of monotonically increasing functions, $u$ and $v$.
    \item By the hint we will prove, each monotonic function will have at most countably many points of discontinuity. Call those sets of points $D_u$ and $D_v$.
    \item Since these two sets $D_u$ and $D_v$ are at most countable, each set will be of measure zero by a result we saw in class. 
    \item Since the total set of discontinuities for $f$ is the union $D_u \cup D_v$, we know that this finite union of at most countable sets will be at most countable, and so measure zero.
    \item Finally, we now have that the set of discountinuities of $f$ is measure zero, implying $f$ is continuous almost everywhere.
\end{enumerate}
Now let's prove that monontonic functions have at most countable many points of discontinuities, so that whole line of reasoning doesn't fall apart.

Let $A$ equal the set of discontinuities of $f$. Denote the righthand limit at $a\in A$ as $f(a^+)$, and lefthand limit as $f(a^-)$. Now since $f$ is monotonic, we know that $f(a^-) < f(a^+)$. And because we're on the real line, we know that there exists a $q_a\in\mathbb{Q}$ such that
\[
    f(a^-) < q_a < f(a^+)   \qquad \forall a \in A
\]
And because $f$ is monotonic, each $q_a$ will be \emph{unique} for each point of discontinuity. That's because if $b$ is a point of discontinuity greater than $a$, then $f(b^-)>f(a^+)$ by the monotonicity of $f$. So $q_b\neq q_a$. Similarly, if $b<a$, then $f(b^+)<f(a^-)$.
\\
\\
And so this establishes a one-to-one correspondence between $A$ and $\mathbb{Q}$ (or a subset of $\mathbb{Q}$ if $A$ finite). So $A$ is countable.

\end{enumerate}

\item \textbf{Exercise 58.1}: Let $f\in\mathscr{R}([a,b])$ and suppose $\int^x_a f\;dx = 0$ for all $x\in(a,b]$. We want to show that $f(x)=0$ almost everywhere in $[a,b]$. We'll do this by contradiction, in a manner similar to Question (1a).

Start with the fact that $f\in\mathscr{R}([a,b])$. First, by the Fundamental Theorem of calculus, $F(x)=\int^x_a f\;dx$ is continuous and differentiable wherever $f$ is continuous. Also, by Lebesgue's theorem, $f$ is continuous almost everywhere. 

So let $x^*$ be a point where $f$ is continuous in $(a,b]$. Without loss of generality, assume that it is greater than the first point of discontinuity. Then, because $f$ is continuous, we know that for any $\varepsilon>0$, there exists a $\delta>0$ such that 
\[
    |x^*-x|<\delta \quad \Rightarrow \quad |f(x^*)-f(x)|<\varepsilon
\]
\newpage
Now take $\varepsilon$ to be the distance from this $x^*$ to the nearest point of discontinuity less than $x^*$, and choose $\delta$ accordingly. Then, we can write $F(x^*)$ as 
\begin{equation}
    \label{q2}
    F(x^*) = \int^{x^*}_a f\;dx = 
    \int^{x^* - \delta}_a f\;dx +
    \int^{x^*}_{x^* - \delta} f\;dx
\end{equation}
Now it's clear that $\int^{x^* - \delta}_a f\;dx$ will equal zero by an assumption of the problem. 
\\
\\
As for $\int^{x^*}_{x^* - \delta} f\;dx$, we know that $f=0$ for all $x$ over the interval. To show this, suppose without loss of generality that $f(x)>0$ over the interval. Then the integral is nonzero, and the sum on the right in Equation \ref{q2} is positive. But this would give us a contradiction because $F(x)$ is assumed to equal zero for all $x\in(a,b]$, including $x^*$.

\textbf{Comment}: This is extremely unintuitive. We know that the Cantor set $C$ is of measure zero, so $f=\chi_C$ must be integrable, since it's continuous almost everywhere and equal to zero almost everywhere. Thus, by the last proof, $f$ is integrable. 

But even so, it's uncountable, and $C$ has as many points as the interval $[0,1]\subset\mathbb{R}$, which is \emph{not} of measure zero, and for which $\chi_{[0,1]}$ certainly wouldn't equal 0 almost everywhere.  And so this adds to list of reasons why the Cantor set is a baffling, unintuitive set, without which exams would be easier, but the world duller.
    
\item 
Let $S$ equal the set of all finite unions of intervals in $\mathbb{R}$:
\[
    S = \left\{ \bigcup^n_{i=1} I_i \quad | \quad
    I_i \text{ is an interval in }  \mathbb{R} 
    \right\}
\]
{\sl Point of Clarification}: Before we proceed, I want to be explicit about the intervals under consideration. Since the statement of the problem doesn't disallow sets like $[a,a]$ from being sets, they are included here. I also allow intervals to be either open, closed, or half open, removing from consideration only something of the form $(a,a)$. And in fact, this isn't an assumption. We have to include all these cases, because we could construct counterexamples showing that $S$ is \emph{not} an algebra if these sets are not included.\footnote{Take the interval $[a,b]$ for finite $a,b$. Then to be an algebra, $S$ must include the complement, $(-\infty,a)$ and $(b,\infty)$, to be an algebra. So half-open intervals are in $S$, and so are infinite intervals. Moreover, since we can do that, consider the intervals $[a,\infty)$ and $(-\infty, a]$ in $S$. Then we must have $[a,a]$ as an interval, since it can be expressed as a finite intersection of two sets in $S$.}
\\
\\
So back to the proof. First, we show that this is an algebra. To do so, we need to show that the properties of an algebra are satisfied:
\begin{itemize}
    \item To show $A\in{S}\Rightarrow A^c\in S$, write out $A$:
    \[ 
        A = \bigcup^n_{i=1} I_i  
    \]
    By DeMorgan's laws, we can rewrite
    \begin{align*}
        A^c &= \left(\bigcup^n_{i=1} I_i \right)^c 
        = \bigcap^n_{i=1} I^c_i  
    \end{align*}
    But for each $i$, we know that  $I_i^c$ will be either 
    \begin{itemize}
        \item A ray, as in $(-\infty,a)$, $(-\infty,a]$, $[a,\infty)$, or $(a,\infty)$.
        \item A union of two intervals, of the form $(-\infty, a) \cup (b, \infty)$, $(-\infty, a] \cup (b, \infty)$, $(-\infty, a] \cup [b, \infty)$, $(-\infty, a] \cup [b, \infty)$.
    \end{itemize}
Thus, we see that $I^c_i$ is, at most, the union of two intervals. So we can write each $I^c_i$ as 
\[
    I^c_i = J_{1,i} \cup J_{2,i}
\]
where either $J_{1,i}$ or possibly $J_{2,i}$ could possibly be the empty set. This is just so we simplify the notation; we'll still get the same result. So we write 
\[
    A^c = \bigcap^n_{i=1} \left(
    J_{1,i} \cup J_{2,i}\right)
\]
Now if we intersect intervals, we can only get back intervals (recall that we include $(a,a]$, $[a,a)$, and $[a,a]$ as valid intervals). And since we're dealing with an intersection, the resulting $A^c$ includes only those pieces in \emph{all} the intervals, which means $A^c$ is itself, at most, $2n$ intervals.

Thus the complement of $A$ is a union of at most $2n$ intervals, implying $A^c$ is in $S$.

\item Next, we note that for $A$ and $B$ in $S$, $A\cup B$ is a finite union of two finite unions of intervals. So the result is also a finite union of intervals, implying $A\cup B\in S$.
\end{itemize}

Lastly, we want to show that $S$ is an algebra that is \emph{not} a $\sigma$-algebra. So take the sets $[n,n+1/2]$, which we allowed in $S$, where $n$ is some integer. Then the set
\[
    A = \bigcup_{i=1}^\infty [n,n+1/2]
\]
Now we can clearly not express $A$ as a finite union of intervals, so it won't be in $S$. Thus $S$ is not closed under countable unions implying $S$ is not a $\sigma$-algebra.


\item \begin{enumerate}
\item \textbf{Exercise 86.5}\begin{enumerate}
\item Given a collection $\{\mathscr{M}_\alpha\}$ of $\sigma$-algebras on $X$, we want to show that $\cap \mathscr{M}_\alpha$ is a $\sigma$-algebra on $X$. 
    
We first show that the intersection satisfies the condition for an algebra. 
\begin{itemize}
\item Suppose that $M \in \cap \mathscr{M}_\alpha$. Then $M\in \mathscr{M}_\alpha$ for all $\alpha$. If this is the case, then it's complement, $M^c$ must also be in $\mathscr{M}_\alpha$ for all $\alpha$, because each is an algebra itself. Thus $M^c$ is in $\cap \mathscr{M}_\alpha$. 

\item Next, suppose that $M_1, M_2 \in \cap \mathscr{M}_\alpha$. Then $M_1 \cup M_2$ is in each $\mathscr{M}_\alpha$, implying that their union is too.
\end{itemize}

Next, we show that the intersection satisfies the key condition for $\sigma$-algebras: being closed under countable unions. 

So suppose that we have each $\{M_1, M_2, \ldots\}$ in $\cap \mathscr{M}_\alpha$. Well then, exactly as above, that implies $M_i \in \mathscr{M}_\alpha$ for all $i$, so their union will be as well, since each $\mathscr{M}_\alpha$ is a $\sigma$-algebra. And so 
\[ 
    \bigcup^\infty_{n=1} M_i \in \mathscr{M}_\alpha \;
    \text{ for all $\alpha$} 
    \quad \Rightarrow\quad
    \bigcup^\infty_{n=1} M_i \in \cap\mathscr{M}_\alpha 
\]
which implies $\cap \mathscr{M}_\alpha$ is a $\sigma$-algebra.

\item For an example of two $\sigma$-algebras whose union is not a $\sigma$-algebra, consider $\mathscr{A}_1$ and $\mathscr{A}_2$ in part (b) of this problem. I'll construct them so that each is a $\sigma$-algebra, though their union is not even an algebra, disqualifying them from being a $\sigma$-algebra as a consequence.

\end{enumerate}

\item
    To show that a union of two algebras need not be an algebra, consider the following two algebras defined on $\mathbb{Z}_{++}$, the positive integers:
\begin{align*}
\mathscr{A}_1 
    &=\{\emptyset, \mathbb{Z}_{++}, \{1\}, \{2, 3, 4, \ldots\}\}\\
\mathscr{A}_2 
    &=\{\emptyset, \mathbb{Z}_{++}, \{2\}, \{1, 3, 4, \ldots\}\} 
\end{align*}
\textbf{Showing Each is an Algebra}: We need to show the two conditions are satisfied. We'll work with $\mathscr{A}_1$, whose results can easily be modified to apply to $\mathscr{A}_2$.
\begin{itemize}
    \item We know that $\emptyset$ and $\mathbb{Z}_{++}$ are complements, while $\{1\}$ and $\{2, 3, 4, \ldots\}$ are complements. So for each $A\in\mathscr{A}_1$, we have $A^c\in\mathscr{A}_1$ as well.

    \item It's also clear if $A, B\in\mathscr{A}_1$, then their union is as well. To see this, consider the cases:
        \begin{enumerate}
            \item If $A=\emptyset$, then $A\cup B = B\in\mathscr{A}_1$. 
            \item If $A=\mathbb{Z}_{++}$, then $A\cup B = \mathbb{Z}_{++}\in\mathscr{A}_1$.
            \item The only remaining case is where $A=\{1\}$ and $B=\{2,3,4,\ldots\}$, in which case $A\cup B = \mathbb{Z}_{++}\in\mathscr{A}_1$.
        \end{enumerate}
\end{itemize}

\textbf{Showing Each is a $\sigma$-Algebra}: Taking $\mathscr{A}_1$ without loss of generality, you really don't need to do much to show this. The algebra is clearly closed under at most countable unions because we covered the unions of \emph{two} sets in $\mathscr{A}_1$ above, and if you take a union of any \emph{three} sets in $\mathscr{A}_1$, you're guaranteeing that the union will equal $\mathbb{Z}_{++}\in\mathscr{A}_1$. So the algebra is indeed a $\sigma$-algebra.  
\\
\\
\textbf{Showing $\mathscr{A}_1\cup \mathscr{A}_2$ is Neither}: Now, we can also easily show that $\mathscr{A}_1 \cup \mathscr{A}_2$ is not an algebra. We do this by taking the sets
\[
A_1 \cup A_2 = \{1\} \cup \{2\} = \{1,2\}
\qquad A_1 \subset \mathscr{A}_1
\quad A_2 \subset \mathscr{A}_2
\]
But this set is in neither $\mathscr{A}_1$ nor $\mathscr{A}_2$,  so it won't be in $\mathscr{A}_1 \cup \mathscr{A}$. Thus the union is not algebra, and if it's not algebra, it won't be a $\sigma$-algebra either.
\end{enumerate}


\item  Not to be submitted.
    
%We define a complete measure space $(X,\mathscr{M}, \mu)$ to be a measure space where 
%\[
%    A\subset B\in\mathscr{M} \; \text{ s.t. }\;\mu(B)=0 
%    \quad\Rightarrow\quad A\in\mathscr{M}
%\]
%We then let 
%\[
%    \bar{\mathscr{M}} = \left\{ S\cup A \; | \;  
%        S\in\mathscr{M}, \; A\subset B\in\mathscr{M}, \;  
%        \mu(B)=0
%    \right\}
%\]
%Finally, We define 
%\[
%    \bar{\mu}(S\cup A) = \mu(S)  \qquad 
%    \text{for $\bar{\mu}$ on $\bar{\mathscr{M}}$}
%\]
%\begin{enumerate}
%\item We first want to show that $\bar{\mu}$ is well-defined. To do so, suppose that we have $S_1, S_2\in\mathscr{M}$ with 
%\[
%    S_1 \cup A_1 = S_2 \cup A_2 
%    \qquad \text{where} \quad
%    \begin{cases}
%    A_1 \subset B_1 &\mu(B_1) = 0\\ A_2 \subset B_2 &\mu(B_2) = 0
%    \end{cases}
%\]
%Then we need to show that $\bar{\mu}(S_1\cup A_1):=\bar{\mu}(S_1)$ equals $\bar{\mu}(S_2\cup A_2):=\bar{\mu}(S_2)$. But we know
%\begin{align*}
%    S_1 &\subset S_1 \cup A_1 = S_2 \cup A_2 \subset 
%        S_2 \cup B_2 \\
%    \Rightarrow \qquad
%    \mu(S_1) &\leq 
%        \mu(S_2 \cup B_2) = \mu(S_2) + \mu(B_2) = 
%        \mu(S_2) + 0 \\
%    \Rightarrow \qquad
%        \mu(S_1) &\leq 
%        \mu(S_2)
%\end{align*}
%It's exactly the same reasoning to show $\mu(S_2) \leq \mu(S_1)$, which implies $\mu(S_1) = \mu(S_2)$. So $\bar{\mu}$ is well defined.
%
%\item Next, we want to show that $\bar{\mathscr{M}}$ is a $\sigma$-algebra. 
%
%\end{enumerate}


\item Not to be submitted.
%\textbf{Exercise 86.9}:  


\item Given $X=\mathbb{R}$ and $\mathscr{M} = \{\emptyset, \mathbb{R}, [0,\infty), (-\infty,0)\}$, we want to show that $f:\mathbb{R}\rightarrow\mathbb{R}$ is measurable if and only if $f=a+b\chi_{[0,\infty)}$ for some $a,b\in\mathbb{R}$. 
    
\begin{enumerate}
    \item \textbf{$\Leftarrow$ Direction}: Suppose that we have the function as given.  It's a simple step function, jumping from $a$ to $b$ at point $0$. so we'll only have to check a few places to show that $f$ is measurable. Reason being: we'll make heavy use of Theorem 87.2 from the book. So let's consider the ray in the range of $f$ $[c,\infty)$ for a couple different cases of $c$:
\begin{itemize}
\item Take any $c_1<a$ and $c_2<a$. Then $f^{-1}([c_1,\infty)) =f^{-1}([c_2,\infty))$. That's because the function never falls below $a$ over the entire domain, and so the preimage will equal the domain:
\[
    f^{-1}([c,\infty)) = \mathbb{R}\in\mathscr{M} \qquad 
        \text{if $c<a$}
\]
\item Next, take any $c \in [a,b]$, then we only capture those points where $f(x)=b$, since the indicator function $\chi_{[0,\infty)}$ needs to be in effect to get $f\geq a$. And so we can write that
\[
    f^{-1}([c,\infty)) = [0,\infty)\in\mathscr{M} \qquad 
        \text{if $c\in[a,b]$}
\]
\item Finally, take any $c >b$. Well, the function never maps to anything greater than $b$, so
\[
    f^{-1}([c,\infty)) = \emptyset\in\mathscr{M} \qquad 
        \text{if $c>b$}
\]
\end{itemize}
And so we just showed that for all $c\in\mathbb{R}$, $f^{-1}([c,\infty))\in\mathscr{M}$. This implies by Theorem 87.2 that $f$ is a measurable function.

\item \textbf{$\Rightarrow$ Direction}: To show this direction, we'll again break it into cases:
\begin{itemize}
    \item Suppose that $f$ is measurable, but also that $f$ doesn't equal some constant $a$ for all $x\in(-\infty,0)$. Then there exist two distinct points $x_1$ and $x_2$ both in $(-\infty,0)$ such that $f(x_1)\neq f(x_2)$. In that case, we can consider the closed singleton sets $\{f(x_1)\}$ and $\{f(x_2)\}$. 

Now since $f$ is assumed measurable, the preimage of closed sets must be in our $\sigma$-algebra, $\mathscr{M}$, which implies 
\begin{align*}
    A_1 &= \{ x \;| \;f(x) = f(x_1) \}  \in \mathscr{M} \\
    A_2 &= \{ x \;| \;f(x) = f(x_2) \}  \in \mathscr{M} 
\end{align*}
But this gives us a contradiction. To see this, consider the following:
\begin{enumerate}
    \item[i.] We know that $A_1$ and $A_2$ are non-empty because, by construction $x_1\in A_1$ and $x_2\in A_2$. So neither $A_1$ nor $A_2$ equal $\emptyset\in\mathscr{M}$.
    \item[ii.] We also know that $A_1 \neq A_2$. This is because, by assumption $x_1\neq x_2$ and $f(x_1)\neq f(x_2)$. So $x_1\not\in A_2$ and $x_2\not\in A_1$.
    \item[iii.] \emph{But} there aren't two sets in $\mathscr{M}$ that could accommodate. Since both $x_1$ and $x_2$ are less than zero, their preimage could only be $(-\infty, 0)$.\footnote{The entirety of $\mathbb{R}$ is ruled out for either $A_1$ or $A_2$, since that would mean the function is constant at either $f(x_1)$ or $f(x_2)$, a possibility we initially ruled out.} But for them \emph{both} to have that pre-image, either $f(x_1)=f(x_2)$ or $x_1=x_2$, which are both cases we ruled out.
\end{enumerate}
Thus, we must have $f(x_1) = f(x_2)$ for all $x_1\neq x_2$ in $(-\infty, 0)$.

\item Next, suppose $f$ is \emph{not} constant at some $b$ on $[0,\infty)$. Then we get a contradiction by exactly the same logic as above. The only difference is we take $x_1$ and $x_2$ to be two distinct points on $[0,\infty)$ where $f(x_1)\neq f(x_2)$, whose preimages we analyze as we did above.
\end{itemize}
Thus, we can assert that the function must be constant at some $a$ on $(-\infty,0)$ and constant at some $b$ on $[0,\infty)$, in which case we can write $f$ as 
\[
    f=a+b\chi_{[0,\infty)}
\]
exactly as suggested. Note, we could even have $a=b$, in which case the preimage is all of $\mathbb{R}\in\mathscr{M}$.
\end{enumerate}

\item \textbf{Exercise 87.8}: For the measurable space $(X,\mathscr{M})$, let $\{f_n\}^\infty_1$ be a sequnce of measurable real-valued functions on $X$. We want to prove that 
\[
    A = \left\{ x\in X \; | \; \{f_n\}^\infty_1 
    \text{ converges in $\mathbb{R}$} \right\}
\]
is in the $\sigma$-algebra $\mathscr{M}$. 

To show this, we'll take the hint and use 87.10, which says that if $f$ and $g$ are measurable, then 
\[
    S = \{ x \; | \; f(x) = g(x) \} \in \mathscr{M}
\]
%This is true because we can rewrite the set $S$ as
%\[
%    S =
%    \{ x \; | \; f(x) - g(x) = 0\} =
%    \{ x \; | \;  h(x) = 0\} 
%\]
%where $h(x) = f(x)-g(x)$. Now since $f$ and $g$ are measurable, their difference is measurable by a theorem we saw in class. And so the set $S$ is really just $h^{-1}(\{0\})$. And since $\{0\}$ is a closed set, the preimage will be $\mathscr{M}$ by the measrability of $h$, which proves the result.
Now given this hint, we rewrite $A$ more suggestively, using the fact that it is convergent where the lim sup and the lim inf are equal. 
\begin{align*}
    A &= \left\{ x\in X \; | \; \lim \sup f_n = \lim \inf f_n 
     \right\} \\
    &= \left\{ x\in X \; | \; \lim \sup f_n - \lim \inf f_n = 0
     \right\} 
\end{align*}
But this isn't quite right because the lim sup and lim inf could both be positive or negative infinity, in which case the difference is undefined. So to deal with this, we break up $A$ into two sets:
\begin{align*}
    A &= A_1 \cup A_2 \\
    A_1 &= \left\{ x\in X \; | \; 
        \text{$\lim \sup f_n = \lim\sup f_n = \infty$ or 
        $-\infty$} \right\} \\
    A_2 &= \left\{ x\in X \; | \; \lim \sup f_n - \lim \inf f_n = 0
     \right\} 
\end{align*}
Now since the lim sup and lim inf are both measurable (by a theorem we saw in class and the fact that the $f_n$ are measurable), the set $A_1$ corresponds to the preimage 
\[
    A_1 = \left(\lim \sup f_n\right)^{-1}(\{-\infty, \infty\}) 
    \cup \left(\lim\inf f_n\right)^{-1}(\{-\infty, \infty\})
\]
Now since $\{-\infty,\infty\}$ is a closed set as a finite union of two singletons and the lim sup and lim inf are measurable, the preimage $A_1$ will be in $\mathscr{M}$.
\\
\\
Next, for $A_2$, we can define $h = \lim \sup f_n - \lim \inf f_n$. Now since the lim sup and lim inf are measurable, their difference is as well, by a theorem we saw in class. And because $h$ is measurable, $h^{-1}(\{0\})$ will be in $\mathscr{M}$.
\\
\\
Finally, since $A_1, A_2 \in \mathscr{M}$ and $\mathscr{M}$ is closed under finite and countable unions we know that $A_1 \cup A_2 = A\in\mathscr{M}$.


\item We want to show that various sets belong to the Borel $\sigma$-algebra, $\mathscr{B}_\mathbb{R}$.
\begin{enumerate} 
    \item \textbf{Cantor Set}: Since $\mathscr{B}_\mathbb{R}$ contains all open sets, it contains all \emph{closed sets} as a conseqeunce. Since $C$ is a closed set on $\mathbb{R}$, we therefore know that it must be in $\mathscr{B}_\mathbb{R}$.
    \item \textbf{The Rationals}: Let $\{q_1, q_2, \ldots\}$ denote an enumeration of $\mathbb{Q}$. We know that a singleton $\{q_i\}$ will be closed. Since $\mathscr{B}_\mathbb{R}$ contains all closed sets, it contains each $\{q_i\}$ for all $i$. Finally, since $\mathscr{B}_\mathbb{R}$ is a $\sigma$-algebra, it is closed under countable unions, implying $\mathbb{Q} = \bigcup^\infty_{i=1} \{q_i\} \in \mathscr{B}_\mathbb{R}$.  
\textbf{The Irrationals}: Next, note that the irrationals can be written as $\mathbb{R}\setminus \mathbb{Q}$. Since $\mathbb{R}\in\mathscr{B}_\mathbb{R}$ and since we just showed $\mathbb{Q}\in\mathscr{B}_\mathbb{R}$, we know by a theorem from class and the text that $\mathbb{R}\setminus \mathbb{Q}$ must be in the $\sigma$-algebra, $\mathscr{B}_\mathbb{R}$ as well.

\item \textbf{Algebraic Numbers}: We know that algebraic numbers are those numbers that are roots of non-trivial (non-zero) polynomials with integer coefficients.\footnote{Sometimes, the definition is given in terms of \emph{rational} coefficients, but multiplication can make it equivalent, so I'll stick with integers.} That means every algebraic number $a_i$ solves
\begin{align*}
    P_{n, Z}(a_i) &= 0 \\
    \text{where } \quad P_{n,Z}(x) &= z_0 + z_1 x^1 + \cdots 
    + z_n x^n
    \qquad 
    \begin{cases}
        Z = \{z_0, \ldots, z_n\} \\
        z_i\in\mathbb{Z}
    \end{cases}
\end{align*}
for some $n$. We first show that the set of polynomials is countable.

For a polynomial of degree $n$, there are $n+1$ coefficients in ${Z}$, each of which can take on a countable number of values, the integers in $\mathbb{Z}$. Thus we can write the set of all possible coefficient combinations for a polynomial of degree $n$ as 
\[
    P_n = \bigcup^{n}_{i=0} \mathbb{Z}
\]
Because $P_n$ is a finite union of countable sets, it is countable. Next, we take the union over all possible degrees we may have for a polynomial,
\begin{equation}
    \label{q9}
    P = \bigcup_{n=1}^\infty P_n
\end{equation}
This is a countable union of countable sets, so it will be countable. Thus, the set of all polynomials is countable.

Finally, each algebraic number $a_i$ corresponds to some degree and coefficient combination, which are members of the countable set in \ref{q9}. This means we can index the $a_i$ by a countable set, implying the algebraic numbers are countable.

Since they are countable, by the same logic we used for the rationals in part (b), we know that the set of algebraic numbers are in $\mathscr{B}_\mathbb{R}$. 

\textbf{Transcendental Numbers}: These are the set of numbers that are not algebraic numbers. Completely analogously to the case of the irrationals in part (b), we can write them as $\mathbb{R}$ with the algebraic numbers removed, in which case they are contained in $\mathscr{B}_\mathbb{R}$, just like the irrationals. 


\end{enumerate} 

\item We want to show that if a set $A\in \mathscr{B}_\mathbb{R}$, then $A+x \in \mathscr{B}_\mathbb{R}$ for all $x\in\mathbb{R}$. To do so, we'll use the hint.

So suppose we have any $\sigma$-algebra $\mathscr{A}$. Then let $\mathscr{A}_x := \{ A + x \; | \; A \in \mathscr{A} \}$. We want to show that if $\mathscr{A}$ contains all open sets, then $\mathscr{A}_x$ does too.

\textbf{Show $A_x$ Open}: First, we show that if $A$ is an open set of $\mathscr{A}$, then $A_x := A + x$ is open too.  To do so, consider consider any point $a_x \in A_x$, where $a_x = a+x$. We want to show that there exists an open ball such that
\[
    a_x \in B_\varepsilon(a_x) \subset A_x \in \mathscr{A}_x
\]
So start with the point $a \in A$. Since $A$ is an open set, we know that there exists an $\varepsilon>0$ such that the ball $B_\varepsilon(a) \subset A$. We can use this $\varepsilon$ to define our ball $B_\varepsilon(a_x)$ so that $B_\varepsilon(a_x)\subset A_x$, proving $A_x$ is open, which we will now show via proof by contradiction.

Suppose $B_\varepsilon(a_x)$ is \emph{not} a subset of $A_x$, where $\varepsilon$ is taken from $B_\varepsilon(a)$. Expanding out our definition
\begin{align*}
    B_\varepsilon(a_x) &= \{ q \; | \; |q - a_x| < \varepsilon \}\\
    &= \{ q  \; | \; |q - (a + x) | < \varepsilon \}\\
    &= \{ q  \; | \; |(q - x) - a  | < \varepsilon \}\\
    &= \{ p + x \; | \; |p - a  | < \varepsilon \}\\
    &= B_\varepsilon(a) + x
\end{align*}

But this furnishes our contradiction.  We supposed that $B_\varepsilon(a_x)$ wasn't a subset of $A_x$; \emph{however}, $B_\varepsilon(a_x)$ is equivalent to the definition of $B_\varepsilon(a) + x$. And we know for all $p \in B_\varepsilon(a)\subset A$, we have $p\in A$. This implies that $p+x \in A_x$ by our definition of $A_x = A+x$. And so we can conlude that $B_\varepsilon(a_x)\subset A_x$, implying $A_x$ is open.
\\
\\
\textbf{Show $A_x$ Closed}: Next, we show that if $A$ is a closed set of $\mathscr{A}$, then $A_x := A + x$ is closed too. To do so, we will show that if $A$ closed, then $A_x$ contains its limit points.

So let $\{a^x_n\}$ be any convergent sequence in $A_x$, converging to $a_x$. Then we can define the sequnce $\{a^x_n - x\}$, which is a sequence the set $A$. Now since $\lim_{n\rightarrow\infty} a^x_n = a_x$, we know that 
\[
    \lim_{n\rightarrow\infty} a_n =
    \lim_{n\rightarrow\infty} a^x_n - x = a_x - x = a
\]
Now since $A$ is closed, we know that $a\in A$. Thus, we know that $a_x = a + x\in A_x$, in which case we have limit point $a_x \in A_x$. So $A_x$ is closed.
\\
\\
\textbf{Show $\mathscr{A}_x$ Contains All Open Sets}: Suppose that $U$ is an open set of $\mathscr{A}$. Then we can write it as
\begin{align*}
    U &= U + 0 = U + (x-x) = (U + x) - x \\
    &= U_x - x = U_x + (-x)
\end{align*}
Now we know that $U_x$ is open by what we proved above. Therefore $U\in\mathscr{A}$ since the $\sigma$-algebra is assumed to contain all open sets. Then, by our definition of $\mathscr{A}_x$, $\left(U_x\right)_{-x}$ must be in $\mathscr{A}_x$ as well, and it must be open, again, by the proof above. Therefore, any open set is in $\mathscr{A}_x$.

\textbf{Apply to Borel $\sigma$-algebra}: So, having established the basics, we can now return to the Borel $\sigma$-algebra. 

So let's take the set $A_x = A + x$. We will consider the various types of sets that $A$ could be, and go case by case:
\begin{itemize}
    \item If $A$ is open, $A+x$ is open by what we showed above, so $A+x\in\mathscr{B}_\mathbb{R}$.
    \item If $A$ is closed, then $A+x$ is closed by what we showed above, so $A+x \in\mathscr{B}_\mathbb{R}$.
    \item $A$ is both, see the above two cases.
    \item $A$ is neither open nor closed. If that's the case, then it must be that either
        \[
            A_x = \bigcup^\infty_{i=1} C_i 
            \qquad \text{or}\qquad
            A_x = \bigcap^\infty_{i=1} U_i 
        \]
    where each $C_i$ is a closed set or each $U_i$ is an open set. 
    
    To see that this must be the case, recall that $\mathscr{B}_\mathbb{R}$ is the \emph{smallest} $\sigma$-algebra containing all open sets. Thus it will only open sets, closed sets (since it's an algebra, and compelements must be there), or up to countable unions and intersections of open and closed sets (by virtue of being a $\sigma$-algebra).  Anything else can be thrown out on the grounds of being extraneous.

    And since finite unions of open or closed sets are well-behaved, we only have to worry about the tricky sets that are infinite unions of closed sets, or infinite intersections of open sets---for which openness or closedness is not preserved.

    So suppose that means if $A_x$ is neither open nor closed, then it must be one of these ill-behaved cases, otherwise the set $A$ would have been open or closed (which we considered above), or tossed out entirely. So suppose 
    \[
        A = \bigcup^\infty_{i=1} C_i \quad
        \text{which implies} \Rightarrow\quad
        A+x = \bigcup^\infty_{i=1} (C_i+x) \qquad
    \]
    To see this, take $a_x \in A+x$. Then $a_x = a + x$ where $a\in A$, by definition. If that's the case, then $a\in C_i$ for some $i$, so $a + x$ would be in $C_i + x$ for some $i$. And so $A+x \subset \bigcup^\infty_{i=1}(C_i + x)$.
    \\
    \\
    Going the other way, suppose that $c_x \in \bigcup^\infty_{i=1} (C_i+x)$. Then $c_x \in C_i +x$ for some $i$, in which case we know that there's a certain $c\in C_i$ for some $i$ where $c_x=c+x$. And if that's the case, then $c\in A$, so that $c+x\in A_x$. Thus $A+x \supset \bigcup^\infty_{i=1}(C_i + x)$.
\\  
\\
    So we have equality: $A+x = \bigcup^\infty_{i=1}(C_i + x)$
\\
\\
\textbf{Conclusion}: Now the whole point of this was to be able to say the following: if we can write $A+x$ as a countable union of closed sets, all of which must be in $\mathscr{B}_\mathbb{R}$, then it's clear $A+x \in \mathscr{B}_\mathbb{R}$ too. 

And in the case where $A+x= \bigcap^\infty_{i=1} U_i$ instead, the proof is very similar. Except, where we had that $a_x$ or $c$ was in \emph{some} $C_i$ above, we'll have $a_x$ and $c$ being in \emph{all} $U_i$. Thus, if we can't write $A+x$ as the countable union of closed sets, then it must be a countable intersection of open sets, implying $A+x\in\mathscr{B}_\mathbb{R}$.


\end{itemize}

\end{enumerate}
\end{document}



%%%% INCLUDING FIGURES %%%%%%%%%%%%%%%%%%%%%%%%%%%%

   % H indicates here 
   %\begin{figure}[h!]
   %   \centering
   %   \includegraphics[scale=1]{file.pdf}
   %\end{figure}

%   \begin{figure}[h!]
%      \centering
%      \mbox{
%	 \subfigure{
%	    \includegraphics[scale=1]{file1.pdf}
%	 }\quad
%	 \subfigure{
%	    \includegraphics[scale=1]{file2.pdf} 
%	 }
%      }
%   \end{figure}
 

%%%%% Including Code %%%%%%%%%%%%%%%%%%%%%5
% \verbatiminput{file.ext}    % Includes verbatim text from the file
% \texttt{text}	  % includes text in courier, or code-like, font
