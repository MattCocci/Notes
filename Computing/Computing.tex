\documentclass[12pt]{article}

\author{Matthew D. Cocci}
\title{Title}
\date{\today}

%% Formatting & Spacing %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\usepackage[top=1in, bottom=1in, left=1in, right=1in]{geometry} % most detailed page formatting control
\usepackage{fullpage} % Simpler than using the geometry package; std effect
\usepackage{setspace}
%\onehalfspacing
\usepackage{microtype}

%% Formatting %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\usepackage[margin=1in]{geometry}
    %   Adjust the margins with geometry package
%\usepackage{pdflscape}
    %   Allows landscape pages
%\usepackage{layout}
    %   Allows plotting of picture of formatting
\usepackage{version}
\excludeversion{solutions}
%\includeversion{solutions}



%% Header %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\usepackage{fancyhdr}
%\pagestyle{fancy}
%\lhead{}
%\rhead{}
%\chead{}
%\setlength{\headheight}{15.2pt}
    %   Make the header bigger to avoid overlap

%\fancyhf{}
    %   Erase header settings

%\renewcommand{\headrulewidth}{0.3pt}
    %   Width of the line

%\setlength{\headsep}{0.2in}
    %   Distance from line to text


%% Mathematics Related %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{mathrsfs}
\usepackage{mathtools}
\usepackage{amsthm} %allows for labeling of theorems
%\numberwithin{equation}{section} % Number equations by section
\usepackage{bbm} % For bold numbers

\theoremstyle{plain}
\newtheorem{thm}{Theorem}[section]
\newtheorem{lem}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}

\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition}
\newtheorem{ex}[thm]{Example}

\theoremstyle{remark}
\newtheorem*{rmk}{Remark}
\newtheorem*{note}{Note}

% Below supports left-right alignment in matrices so the negative
% signs don't look bad
\makeatletter
\renewcommand*\env@matrix[1][c]{\hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \array{*\c@MaxMatrixCols #1}}
\makeatother


%% Font Choices %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[utf8]{inputenc}
%\usepackage{blindtext}
\usepackage{courier}


%% Figures %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{tikz}
\usetikzlibrary{decorations.pathreplacing}
\usetikzlibrary{arrows.meta}
\usepackage{graphicx}
\usepackage{subfigure}
    %   For plotting multiple figures at once
%\graphicspath{ {Directory/} }
    %   Set a directory for where to look for figures


%% Hyperlinks %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{hyperref}
\hypersetup{%
    colorlinks,
        %   This colors the links themselves, not boxes
    citecolor=black,
        %   Everything here and below changes link colors
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}

%% Colors %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{color}
\definecolor{codegreen}{RGB}{28,172,0}
\definecolor{codelilas}{RGB}{170,55,241}

% David4 color scheme
\definecolor{d4blue}{RGB}{100,191,255}
\definecolor{d4gray}{RGB}{175,175,175}
\definecolor{d4black}{RGB}{85,85,85}
\definecolor{d4orange}{RGB}{255,150,100}

%% Including Code %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{verbatim}
    %   For including verbatim code from files, no colors
\usepackage{listings}
    %   For including code snippets written directly in this doc

\lstdefinestyle{bash}{%
  language=bash,%
  basicstyle=\footnotesize\ttfamily,%
  showstringspaces=false,%
  commentstyle=\color{gray},%
  keywordstyle=\color{blue},%
  xleftmargin=0.25in,%
  xrightmargin=0.25in
}
\lstdefinestyle{log}{%
  basicstyle=\scriptsize\ttfamily,%
  showstringspaces=false,%
  xleftmargin=0.25in,%
  xrightmargin=0.25in
}


\lstdefinestyle{matlab}{%
  language=Matlab,%
  basicstyle=\footnotesize\ttfamily,%
  breaklines=true,%
  morekeywords={matlab2tikz},%
  keywordstyle=\color{blue},%
  morekeywords=[2]{1}, keywordstyle=[2]{\color{black}},%
  identifierstyle=\color{black},%
  stringstyle=\color{codelilas},%
  commentstyle=\color{codegreen},%
  showstringspaces=false,%
    %   Without this there will be a symbol in
    %   the places where there is a space
  %numbers=left,%
  %numberstyle={\tiny \color{black}},%
    %   Size of the numbers
  numbersep=9pt,%
    %   Defines how far the numbers are from the text
  emph=[1]{for,end,break,switch,case},emphstyle=[1]\color{blue},%
    %   Some words to emphasise
}

\newcommand{\matlabcode}[1]{%
    \lstset{style=matlab}%
    \lstinputlisting{#1}
}
    %   For including Matlab code from .m file with colors,
    %   line numbering, etc.

\lstdefinelanguage{Julia}%
  {morekeywords={abstract,break,case,catch,const,continue,do,else,elseif,%
      end,export,false,for,function,immutable,import,importall,if,in,%
      macro,module,otherwise,quote,return,switch,true,try,type,typealias,%
      using,while},%
   sensitive=true,%
   %alsoother={$},%
   morecomment=[l]\#,%
   morecomment=[n]{\#=}{=\#},%
   morestring=[s]{"}{"},%
   morestring=[m]{'}{'},%
}[keywords,comments,strings]

\lstdefinestyle{julia}{%
    language         = Julia,
    basicstyle       = \scriptsize\ttfamily,
    keywordstyle     = \bfseries\color{blue},
    stringstyle      = \color{codegreen},
    commentstyle     = \color{codegreen},
    showstringspaces = false,
    literate         = %
      {ρ}{{$\rho$}}1
      {ℓ}{{$\ell$}}1
      {∑}{{$\Sigma$}}1
      {Σ}{{$\Sigma$}}1
      {√}{{$\sqrt{}$}}1
      {θ}{{$\theta$}}1
      {ω}{{$\omega$}}1
      {ɛ}{{$\varepsilon$}}1
      {φ}{{$\varphi$}}1
      {σ²}{{$\sigma^2$}}1
      {Φ}{{$\Phi$}}1
      {ϕ}{{$\phi$}}1
      {Dₑ}{{$D_e$}}1
      {Σ}{{$\Sigma$}}1
      {γ}{{$\gamma$}}1
      {δ}{{$\delta$}}1
      {τ}{{$\tau$}}1
      {μ}{{$\mu$}}1
      {β}{{$\beta$}}1
      {Λ}{{$\Lambda$}}1
      {λ}{{$\lambda$}}1
      {r̃}{{$\tilde{\text{r}}$}}1
      {α}{{$\alpha$}}1
      {σ}{{$\sigma$}}1
      {π}{{$\pi$}}1
      {∈}{{$\in$}}1
      {∞}{{$\infty$}}1
}


%% Bibliographies %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\usepackage{natbib}
    %---For bibliographies
%\setlength{\bibsep}{3pt} % Set how far apart bibentries are

%% Misc %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{enumitem}
    %   Has to do with enumeration
\usepackage{appendix}
%\usepackage{natbib}
    %   For bibliographies
\usepackage{pdfpages}
    %   For including whole pdf pages as a page in doc
\usepackage{pgffor}
    %   For easier looping


%% User Defined %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\newcommand{\nameofcmd}{Text to display}
\newcommand*{\Chi}{\mbox{\large$\chi$}} %big chi
    %   Bigger Chi

% In math mode, Use this instead of \munderbar, since that changes the
% font from math to regular
\makeatletter
\def\munderbar#1{\underline{\sbox\tw@{$#1$}\dp\tw@\z@\box\tw@}}
\makeatother

% Misc Math
\newcommand{\ra}{\rightarrow}
\newcommand{\diag}{\text{diag}}
\newcommand{\proj}{\operatorname{proj}}
\newcommand{\ch}{\text{ch}}
\newcommand{\dom}{\text{dom}}
\newcommand{\one}[1]{\mathbf{1}_{#1}}


% Command to generate new math commands:
% - Suppose you want to refer to \boldsymbol{x} as just \bsx, where 'x'
%   is any letter. This commands lets you generate \bsa, \bsb, etc.
%   without copy pasting \newcommand{\bsa}{\boldsymbol{a}} for each
%   letter individually. Instead, just include
%
%     \generate{bs}{\boldsymbol}{a,...,z}
%
% - Uses pgffor package to loop
% - Example with optional argument. Will generate \bshatx to represent
%   \boldsymbol{\hat{x}} for all letters x
%
%     \generate[\hat]{bshat}{\boldsymbol}{a,...,z}

\newcommand{\generate}[4][]{%
  % Takes 3 arguments (maybe four):
  % - 1   wrapcmd (optional, defaults to nothing)
  % - 2   newname
  % - 3   mathmacro
  % - 4   Names to loop over
  %
  % Will produce
  %
  %   \newcommand{\newnameX}{mathmacro{wrapcmd{X}}}
  %
  % for each X in argument 4

  \foreach \x in {#4}{%
    \expandafter\xdef\csname%
      #2\x%
    \endcsname%
    {\noexpand\ensuremath{\noexpand#3{\noexpand#1{\x}}}}
  }
}


% MATHSCR: Gen \sX to stand for \mathscr{X} for all upper case letters
\generate{s}{\mathscr}{A,...,Z}


% BOLDSYMBOL: Generate \bsX to stand for \boldsymbol{X}, all upper and
% lower case.
%
% Letters and greek letters
\generate{bs}{\boldsymbol}{a,...,z}
\generate{bs}{\boldsymbol}{A,...,Z}
\newcommand{\bstheta}{\boldsymbol{\theta}}
\newcommand{\bsmu}{\boldsymbol{\mu}}
\newcommand{\bsSigma}{\boldsymbol{\Sigma}}
\newcommand{\bsvarepsilon}{\boldsymbol{\varepsilon}}
\newcommand{\bsalpha}{\boldsymbol{\alpha}}
\newcommand{\bsbeta}{\boldsymbol{\beta}}
\newcommand{\bsOmega}{\boldsymbol{\Omega}}
\newcommand{\bshatOmega}{\boldsymbol{\hat{\Omega}}}
\newcommand{\bshatG}{\boldsymbol{\hat{G}}}
\newcommand{\bsgamma}{\boldsymbol{\gamma}}
\newcommand{\bslambda}{\boldsymbol{\lambda}}

% Special cases like \bshatb for \boldsymbol{\hat{b}}
\generate[\hat]{bshat}{\boldsymbol}{b,y,x,X,V,S,W}
\newcommand{\bshatbeta}{\boldsymbol{\hat{\beta}}}
\newcommand{\bshatmu}{\boldsymbol{\hat{\mu}}}
\newcommand{\bshattheta}{\boldsymbol{\hat{\theta}}}
\newcommand{\bshatSigma}{\boldsymbol{\hat{\Sigma}}}
\newcommand{\bstildebeta}{\boldsymbol{\tilde{\beta}}}
\newcommand{\bstildetheta}{\boldsymbol{\tilde{\theta}}}
\newcommand{\bsbarbeta}{\boldsymbol{\overline{\beta}}}
\newcommand{\bsbarg}{\boldsymbol{\overline{g}}}

% Redefine \bso to be the zero vector
\renewcommand{\bso}{\boldsymbol{0}}

% Transposes of all the boldsymbol shit
\newcommand{\bsbp}{\boldsymbol{b'}}
\newcommand{\bshatbp}{\boldsymbol{\hat{b'}}}
\newcommand{\bsdp}{\boldsymbol{d'}}
\newcommand{\bsgp}{\boldsymbol{g'}}
\newcommand{\bsGp}{\boldsymbol{G'}}
\newcommand{\bshp}{\boldsymbol{h'}}
\newcommand{\bsSp}{\boldsymbol{S'}}
\newcommand{\bsup}{\boldsymbol{u'}}
\newcommand{\bsxp}{\boldsymbol{x'}}
\newcommand{\bsyp}{\boldsymbol{y'}}
\newcommand{\bsthetap}{\boldsymbol{\theta'}}
\newcommand{\bsmup}{\boldsymbol{\mu'}}
\newcommand{\bsSigmap}{\boldsymbol{\Sigma'}}
\newcommand{\bshatmup}{\boldsymbol{\hat{\mu'}}}
\newcommand{\bshatSigmap}{\boldsymbol{\hat{\Sigma'}}}

% MATHCAL: Gen \calX to stand for \mathcal{X}, all upper case
\generate{cal}{\mathcal}{A,...,Z}

% MATHBB: Gen \X to stand for \mathbb{X} for some upper case
\generate{}{\mathbb}{R,Q,C,Z,N,Z,E}
\newcommand{\Rn}{\mathbb{R}^n}
\newcommand{\RN}{\mathbb{R}^N}
\newcommand{\Rk}{\mathbb{R}^k}
\newcommand{\RK}{\mathbb{R}^K}
\newcommand{\RL}{\mathbb{R}^L}
\newcommand{\Rl}{\mathbb{R}^\ell}
\newcommand{\Rm}{\mathbb{R}^m}
\newcommand{\Rnn}{\mathbb{R}^{n\times n}}
\newcommand{\Rmn}{\mathbb{R}^{m\times n}}
\newcommand{\Rnm}{\mathbb{R}^{n\times m}}
\newcommand{\Rkn}{\mathbb{R}^{k\times n}}
\newcommand{\Cn}{\mathbb{C}^n}
\newcommand{\Cnn}{\mathbb{C}^{n\times n}}

% Dot over
\newcommand{\dx}{\dot{x}}
\newcommand{\ddx}{\ddot{x}}
\newcommand{\dy}{\dot{y}}
\newcommand{\ddy}{\ddot{y}}

% First derivatives
\newcommand{\dydx}{\frac{dy}{dx}}
\newcommand{\dfdx}{\frac{df}{dx}}
\newcommand{\dfdy}{\frac{df}{dy}}
\newcommand{\dfdz}{\frac{df}{dz}}

% Second derivatives
\newcommand{\ddyddx}{\frac{d^2y}{dx^2}}
\newcommand{\ddydxdy}{\frac{d^2y}{dx dy}}
\newcommand{\ddydydx}{\frac{d^2y}{dy dx}}
\newcommand{\ddfddx}{\frac{d^2f}{dx^2}}
\newcommand{\ddfddy}{\frac{d^2f}{dy^2}}
\newcommand{\ddfddz}{\frac{d^2f}{dz^2}}
\newcommand{\ddfdxdy}{\frac{d^2f}{dx dy}}
\newcommand{\ddfdydx}{\frac{d^2f}{dy dx}}


% First Partial Derivatives
\newcommand{\pypx}{\frac{\partial y}{\partial x}}
\newcommand{\pfpx}{\frac{\partial f}{\partial x}}
\newcommand{\pfpy}{\frac{\partial f}{\partial y}}
\newcommand{\pfpz}{\frac{\partial f}{\partial z}}


% argmin and argmax
\DeclareMathOperator*{\argmin}{arg\;min}
\DeclareMathOperator*{\argmax}{arg\;max}


% Various probability and statistics commands
\newcommand{\iid}{\overset{iid}{\sim}}
\newcommand{\vc}{\operatorname{vec}}
\newcommand{\Cov}{\operatorname{Cov}}
\newcommand{\rank}{\operatorname{rank}}
\newcommand{\trace}{\operatorname{trace}}
\newcommand{\Corr}{\operatorname{Corr}}
\newcommand{\Var}{\operatorname{Var}}
\newcommand{\asto}{\xrightarrow{a.s.}}
\newcommand{\pto}{\xrightarrow{p}}
\newcommand{\msto}{\xrightarrow{m.s.}}
\newcommand{\dto}{\xrightarrow{d}}
\newcommand{\Lpto}{\xrightarrow{L_p}}
\newcommand{\Lqto}[1]{\xrightarrow{L_{#1}}}
\newcommand{\plim}{\text{plim}_{n\rightarrow\infty}}


% Redefine real and imaginary from fraktur to plain text
\renewcommand{\Re}{\operatorname{Re}}
\renewcommand{\Im}{\operatorname{Im}}

% Shorter sums: ``Sum from X to Y''
% - sumXY  is equivalent to \sum^Y_{X=1}
% - sumXYz is equivalent to \sum^Y_{X=0}
\newcommand{\sumnN}{\sum^N_{n=1}}
\newcommand{\sumin}{\sum^n_{i=1}}
\newcommand{\sumjn}{\sum^n_{j=1}}
\newcommand{\sumim}{\sum^m_{i=1}}
\newcommand{\sumik}{\sum^k_{i=1}}
\newcommand{\sumiN}{\sum^N_{i=1}}
\newcommand{\sumkn}{\sum^n_{k=1}}
\newcommand{\sumtT}{\sum^T_{t=1}}
\newcommand{\sumninf}{\sum^\infty_{n=1}}
\newcommand{\sumtinf}{\sum^\infty_{t=1}}
\newcommand{\sumnNz}{\sum^N_{n=0}}
\newcommand{\suminz}{\sum^n_{i=0}}
\newcommand{\sumknz}{\sum^n_{k=0}}
\newcommand{\sumtTz}{\sum^T_{t=0}}
\newcommand{\sumninfz}{\sum^\infty_{n=0}}
\newcommand{\sumtinfz}{\sum^\infty_{t=0}}

\newcommand{\prodnN}{\prod^N_{n=1}}
\newcommand{\prodin}{\prod^n_{i=1}}
\newcommand{\prodiN}{\prod^N_{i=1}}
\newcommand{\prodkn}{\prod^n_{k=1}}
\newcommand{\prodtT}{\prod^T_{t=1}}
\newcommand{\prodnNz}{\prod^N_{n=0}}
\newcommand{\prodinz}{\prod^n_{i=0}}
\newcommand{\prodknz}{\prod^n_{k=0}}
\newcommand{\prodtTz}{\prod^T_{t=0}}

% Bounds
\newcommand{\atob}{_a^b}
\newcommand{\ztoinf}{_0^\infty}
\newcommand{\kinf}{_{k=1}^\infty}
\newcommand{\ninf}{_{n=1}^\infty}
\newcommand{\minf}{_{m=1}^\infty}
\newcommand{\tinf}{_{t=1}^\infty}
\newcommand{\nN}{_{n=1}^N}
\newcommand{\tT}{_{t=1}^T}
\newcommand{\kinfz}{_{k=0}^\infty}
\newcommand{\ninfz}{_{n=0}^\infty}
\newcommand{\minfz}{_{m=0}^\infty}
\newcommand{\tinfz}{_{t=0}^\infty}
\newcommand{\nNz}{_{n=0}^N}

% Limits
\newcommand{\limN}{\lim_{N\rightarrow\infty}}
\newcommand{\limn}{\lim_{n\rightarrow\infty}}
\newcommand{\limk}{\lim_{k\rightarrow\infty}}
\newcommand{\limt}{\lim_{t\rightarrow\infty}}
\newcommand{\limT}{\lim_{T\rightarrow\infty}}
\newcommand{\limhz}{\lim_{h\rightarrow 0}}

% Shorter integrals: ``Integral from X to Y''
% - intXY is equivalent to \int^Y_X
\newcommand{\intab}{\int_a^b}
\newcommand{\intzN}{\int_0^N}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% BODY %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\begin{document}
%\maketitle
\lstset{style=log}

\tableofcontents

\clearpage
\section{Computer Architecture}

\subsection{Overview}


Von Neumann or Princeton Architecture:
Abstract model of a computer that consists of
\begin{itemize}
  \item Central Processing Unit
    \begin{itemize}
      \item Arithmetic Logic Unit (ALU): Performs simple operations like
        plus, minus, times, division, and logical operations.
      \item Control Unit: Coordinates the operation and sequence of data
        movements between the other parts of the Architecture.
    \end{itemize}
  \item Memory:
    Stores data and programs.
  \item Input \& Output
\end{itemize}


\subsection{CPU}

CPU \& Cores:
Each CPU is a collection of processor cores (usually physical).

A single node/server/computer often has multiple CPUs, which we refer to
as sockets.


\clearpage
\subsection{Memory}

Memory \& Memory Representation
\begin{itemize}
  \item Operating system manages memory.
    It's one of its roles
  \item Hardware involved in storing information.
  \item Two flavors of memory.
    \begin{itemize}
      \item Random Access Memory (RAM):
        Temporary memory, quick and easy to acess, used to execute
        programs. Also called volatile memory.
      \item Lasting memory, e.g. hard drives.
        Non-volatile memory storage.
    \end{itemize}
  \item RAM
    \begin{itemize}
      \item Represent as a sequence of binary memory cells, bits.
      \item Groupings of several bits together is a word, which is the
        fundamental unit of data that can be moved between
        RAM and the processor.
        Typical sizes are 8, 16, 32, and 64 bit.
      \item Grouping of bits into words allows for addressing of memory.
      \item Each word has an address, which is the location of the word
        in the computer's memory.
      \item By working with addresses, we can have low-level access to
        the computer by allowing direct access to the memory.
        We know where things are.
      \item One can literally move through the computer's memory from
        word to word.
      \item Memory is composed of bits that are organized into words.
    \end{itemize}
  \item Hexadecimal uses $0-9$ to represent the first ten digits, then
    adds on $A,B,C,D,E,F$ for 10, 11, 12, 13, 14, 15.
  \item One byte is eight bits.
    A byte has $2^8=2^4\times 2^4 = 16\times 16$ possible
    configurations/values.
    Two hexadecimal numbers can encode
    $16\times 16$ values.
    Therefore, each value/configuration for a byte can be mapped into a
    two-digit hexadecimal number.
  \item The stack is the pile of variables in memory, one after the
    other.
    As we create variables, we ``stack'' them on top of each other in
    memory, i.e. place them next to each other in memory.
\end{itemize}


\clearpage
\subsection{Input/Output}

Want to discuss input/output abstractions for delivering to or receiving
output from programs.
These abstractions let us focus on complying/interfacing with the
system, without having to worry about how the system ultimately
represents, outputs, gathers, etc. the text.

Linux Standard Streams
\begin{itemize}
  \item A stream is something that can transfer data, including (and
    especially) text.
  \item Whenver a command is executed, three standard streams are
    created:
    \texttt{stdin},
    \texttt{stdout},
    \texttt{stderr}

  \item Standard Input Stream:
    An abstraction for an infinite input sequence or a file containing
    infinite text.
    Takes text input and has the capacity to transfer that information
    to programs for execution.

    Reading from the standard input stream involves consuming and
    processing the text there.
    Note that the collection of pieces of text separated by
    whitespace are referred to as \emph{tokens}.

  \item Standard Output Stream:
    An abstraction for an infinite output sequence or a file containing
    infinite text.
    Has the capacity to transfer output from programs elsewehere, like
    other programs via pips or the terminal (where it is sent by
    default).

  \item Pipes connected standard output of one program to standard input
    of another.

  \item
    Java and other programming languages also have standard drawing and
    audio, much like standard input and ouptut.
\end{itemize}
Shells and Terminals
\begin{itemize}
  \item Shell
    \begin{itemize}
      \item A user interface for interacting with an operating system (via
        text commands which must conform to a certain standard/syntax) and
        carrying out low-level machine commands.
      \item Can use either a CLI (command line interface) or GUI (graphical
        user interface).
      \item It is the outermost layer around OS kernel.
      \item Windows computers use DOS shell prompts to interact with the
        system. Unix computers use BASH prompts.
    \end{itemize}

  \item Terminal
    \begin{itemize}
      \item An abstraction for providing input to and getting output from a
        program.
      \item More speficially, a terminal is a stream of text that sends
        input and output to two basic ``pipes,'' \texttt{stdin} and
        \texttt{stdout}.
      \item Terminals run shells, which is how the commands are carried
        out.
      \item
        The model/sequence is as follows.
        Type a text command, the terminal sends that text input to
        \texttt{stdin}.
        The shell its running transfers the data in \texttt{stdin} to
        given program which then executes low-level machine commands
        (like ``do these things'', ``run this program'', ``read this
        file'', etc.).
        After completion, the program sends data to the \texttt{stdout}
        stream, which by default, is directed to the terminal which then
        displays text.
        It's a way of working with files that are often nothing more than a
        stream of text.
      \item Hence terminals generally display \texttt{stdout} whenever
        you run a command.
    \end{itemize}

  \item Command line input:
    An abstraction for providing arguments (strings) to a program.
\end{itemize}
Redirection and Pipes
\begin{itemize}

  \item \texttt{>} and \texttt{>>}: Lets you redirect \texttt{stdout}
    (i.e. the text therein) that's produced by a program to any file.
    The former overwrites, the latter appends.

    Note that we can discard output entirely by sending output to the
    null device as follows:
    \lstset{style=bash}
    \begin{lstlisting}
    cmd > /dev/null 2>&1
    \end{lstlisting}
    where 2 is an alias for \texttt{stderr} and 1 for \texttt{stdout}.

  \item \texttt{<}: Redirects input from file into a program.
    Not used a lot since many commands take file arguments already.

  \item
    \texttt{cmd1 | cmd2}:	Pipes standard output from \texttt{cmd1} to
    standard input of \texttt{cmd2}.
\end{itemize}


\clearpage
\subsection{High-Performance Computing Clusters}

A cluster is a group of inter-connected computers that work together to
perform computationally-intensive tasks.
Each computer is a node, so a cluster is a collection of nodes.

Head Node(s)
\begin{itemize}
  \item Server(s) that connects a cluster to an outside network (like
    the internet or a company's internal network).
  \item Handles login, script editing, code compilation, job submission.
  \item Generally don't want to run stuff here.
\end{itemize}
Compute Node
\begin{itemize}
\item Server used for computing, sometimes managed by a scheduler.
\item Compute nodes always contain RAM and one or more CPUs (usually
  two), each with multiple processor cores, on which computation may
  take place.
\item CPU (only) nodes stop there
\item GPU nodes are nodes/servers that, in addition, have GPUs for
  carrying out computation.
\end{itemize}
Schedulers help divide up the resources of a cluster and handle
submission of jobs to the compute nodes.

Server (host) address is what we use to identify the server we want to
connect to using ssh


\clearpage
\subsection{Parallel Computing}

\href{https://princetonuniversity.github.io/PUbootcamp/sessions/parallel-programming/Intro_PP_bootcamp_2018.pdf}{Resource here}.
In contrast to serialization (execution of all computations one after
the other), can parallelize.
\\
\\
MPI (Message Passing Interface)
\begin{itemize}
  \item A standardized interface (like BASH)
  \item
    Can run many copies of the same program/task across many nodes (and
    cores) in a cluster, and MPI will pass messages to coordinate.
    Distributed memory.
  \item Multiple implementations:
    OpenMPI, MPICH, proprietary Intel implemntations, etc.
  \item Structure of a program
    \begin{lstlisting}
    #!include <mpi.h> // Include header file

    // Start of program
    int main (int argc, char argv*[])
    {

    // Non-interacting code
    ..

    // Initialize MPI
    // Must be called in every MPI program as first call
    MPI_Init(&argc, &argv);

    // Parallel code
    ..

    // End MPI environment
    MPI_Finalize();

    // More non-interacting code
    ..

    // End of program
    return 0;
    }

    \end{lstlisting}
\end{itemize}
OpenMP (Open Multi-Processing)
\begin{itemize}
  \item Run multiple threads on a single node, with each thread using
    one core. Shared memory.
  \item Not at all related to MPI
  \item Each program starts with a single process that has its own
    private memory space and can create one or more threads which share
    the memory of the parent process.
  \item Structure of a program
    \begin{lstlisting}
    #!include <omp.h> // Include header file

    // Start of program
    int main (int argc, char argv*[])
    {

    // Non-parallel code
    ..

    // Indicate that next code block should be executed in parallel
    #pragma omp parallel
    {
      ...
    }

    // Non-parallel code
    ..

    // End of program
    return 0;
    }

    \end{lstlisting}

  \item This is what Matlab parallelization uses under the hood
\end{itemize}
Define
\begin{align*}
  \text{(Parallel Efficiency)}
  =
  \frac{%
    \text{(Serial Execution Time)}
  }{%
    \text{(Parallel Execution Time per Task)}
    \times
    \text{(Number of Tasks)}
  }
\end{align*}





\clearpage
\section{UNIX Operating System}

\subsection{Unix File System}

Everything in Unix is essentially a file, and there are two types of
files:
\begin{itemize}
  \item Text: For human use/consumption
  \item Binary: For computer use/consumption
\end{itemize}

\subsection{Directory Structure}

Files are organized into a heirarchy under the the root directory
\texttt{/}, owned/managed by a single root user who can edit everything
under this directory.
Under this root directory, we have
\begin{itemize}
  \item \texttt{/bin}: \emph{Essential} binary executables.
    Important system programs and utilities like the bash shell are
    here.
    These are the crucial absolutely necessary things that are
    guaranteed to be mounted whenever \texttt{/} is mounted,
    irrespective of whether the \texttt{/usr} directory is mounted (as
    it can be stored on a separate partition).
    Used by the system, the system administrator, and users.

  \item \texttt{/sbin}: Like \texttt{/bin}, contains essential binaries
    that are generally intended to be run by \emph{system} and
    \emph{system administrator} for \emph{system maintenance} purposes.

  \item \texttt{/lib}:
    Libraries needed by the essential binaries in \texttt{/bin} and
    \texttt{/sbin}.

  \item \texttt{/usr}:
    Second level user binaries and read-only data.
    Non-essential applications and files used by \emph{users} as opposed
    to the system. Non-essential in the sense that if we mount
    \texttt{/}, we can still work with the system even we don't mount
    \texttt{/usr}.


    Has subdirectories similar to the subdirectories of \texttt{/}:
    \begin{itemize}
      \item \texttt{/usr/bin}:
        Binary files for user programs
      \item \texttt{/usr/lib}
      \item \texttt{/usr/sbin}
      \item \texttt{/usr/local/}:
        Locally compiled applications (i.e. built from source, not
        installed with APT or package manager) are installed here by
        default so as not to fuck up the rest of the system.
    \end{itemize}
  \item \texttt{/var}:
    Variable data files.
    Since \texttt{/usr} is read-only, log files and everything else that
    must be written are written here.
    System log files, emails, print queues, etc.


  \item \texttt{/root}:
    Home directory of the single root user.
    His home directory is \emph{not} just \texttt{/} or in
    \texttt{/home}.

  \item \texttt{/home}:
    Contains the home folders of all non-root users on the system.
    Each user of the system gets their own subfolder under
    \texttt{/home} with all their files.
  \item \texttt{/mnt}:
    Historically, where system admins mounted temporary file systems,
    although you can technically mount anywhere in the file system.
  \item \texttt{/media}:
    Contains subdirectories where removable media devices are mounted
    when inserted/connected.
  \item \texttt{/etc}:
    Configuration files required by all programs, can generally be
    edited by hand in a text editor.
  \item \texttt{/boot}:
    Contains files needed to boot the system, e.g. the GRUB files and
    the Linux kernels.
    Note, doesn't have the configuration files though. Those are all in
    \texttt{/etc}.
  \item \texttt{/tmp}:
    For storing temporary files. Deleted on restart or at any time.
  \item \texttt{/run}:
    Standard place for applications to store transient files they need.
    Not stored in \texttt{/tmp} because files there can be deleted.
  \item \texttt{/dev}:
    Note actual files, but they are ``files'' representing
    devices/hardware (like the hard drive).
    Also contains pseudo-devices like \texttt{rand} or \texttt{null}
    that generate random numbers or discard output piped to it,
    respectively.
  \item \texttt{/proc}:
    Contains special files that represent the system and process
    information.
    \texttt{/proc/(pid)} contains information about the process running
    with that pid.

  \item \texttt{/srv}: Service data containing data for services
    \emph{provided by} the system.
  \item \texttt{/opt}:
    Subdirectories for optional software packages.
    Commonly used by proprietary software that doesn't obey the standard
    Unix file system heirarchy and wants to do it's own thing.
    For example, the application ``application'' might just dumb all
    its files into \texttt{/opt/application/} rather than scatter it's
    files around in the various system directories as is standard.
\end{itemize}


\clearpage
\subsection{\texttt{chmod}}

The syntax is roughly
\begin{lstlisting}
  chmod <ugo><+-><rwx> path/to/file.txt
\end{lstlisting}
Note
\begin{itemize}
  \item \texttt{u} is user, \texttt{g} is group, \texttt{o} is other.
  \item \texttt{+} or \texttt{-} add/remove permissions
  \item \texttt{r} is read, \texttt{w} is write, and \texttt{x} is
    write
\end{itemize}


\clearpage
\subsection{BASH}

 By default, Linux uses the BASH shell.


\subsubsection{Environment}

An environment is essentially just the collection of \emph{settings} for
your particular session.
For example, when executing commands in a terminal running BASH, these
settings help tell the shell how to interpret and execute commands
(e.g.\ what compiler to run, where to look for programs and packages,
etc.).

It is represented by \emph{environment variables}, which encode those
settings for a particular shell session.
\begin{itemize}
  \item \texttt{\$HOME}:
    Reserved variable for the home directory;
    \texttt{~} gets expanded to this.
  \item \texttt{\$PS1}: Appearance of the command prompt string
  \item \texttt{\$PATH}:
    Variable that evaluates to a list of directory names separated by
    colons and specifying the directories in which the shell looks for
    commands.

    Can add to this path via
    \lstset{style=bash}
    \begin{lstlisting}
    export PATH=/new/dir/:$PATH
    \end{lstlisting}
    Whenever you type a command, the shell looks in those dirs, in
    order, to determine what executable to run.
    The command
    \texttt{which <command>}
    tells you the precise path of the executable that is being used, if
    there are multiple (e.g. multiple Python installations).

    Be careful always to \emph{append} or \emph{prepend} when modifying
    \texttt{\$PATH}. Don't reset entirely.
\end{itemize}




\clearpage
\subsection{Utilities}

Utilities are programs or tools that do things.
We invoke them in Unix via the command line interface, typing commands
into the terminal, which are then interpreted by the shell and prompt
the computer to do a thing.

This section will therefore detail those tools/utilities and the text
commands that invoke/control them.

\subsubsection{\texttt{rsync}}

A powerful utility for transferring many files with the potential to
resume a broken connect

\subsubsection{\texttt{sed}}

Stream editor that takes a stream of text pulled from a file or
\texttt{stdout} via a pipe.


\subsubsection{\texttt{grep}}

Take a regular expression and return any line in the file that matches
the expression.


\subsubsection{Installation and Package Management}

\paragraph{From Source}
\begin{itemize}
  \item Download files, usually a zip or tarball. Extract.

  \item CD into the directory, which contains all the source files.
    Often there's a README or install file. Read that, see if there's
    anything distinctive about this install.

  \item Configure:
    Typically, you first run \texttt{./configure}, which checks the
    system for the software and packages needed to build the program.

    Resolve dependences with APT or by installing other packages
    from source. Rerun \texttt{./configure}.

    Might need to do this multiple times until \texttt{./configure} runs
    through successfully.

  \item Compile:
    Run the command \texttt{make} to compile source code into binary.

  \item Install:
    Run \texttt{sudo make install} to use the compiled files to install.
    Files are probably stored under \texttt{/usr/local/}

  \item Uninstall:
    Run \texttt{sudo make uninstall}.

  \item Updating (Lack Thereof):
    No easy way to update packages this way.
    Need to uninstall and reinstall.
    That's why it's best to use a package manager.
    See below.
\end{itemize}


\clearpage
\paragraph{APT, DPGK, and Package Management}
APT (Advanced Packaging Tool).
This is a more-user friendly wrapper of Debian's package manager DPGK.
Comprehensive reference
\href{https://www.digitalocean.com/community/tutorials/ubuntu-and-debian-package-management-essentials}{here}.
\begin{itemize}
  \item Packages: A discrete unit of software containing user
    interfaces, modules, libraries.
    Want to install, use, and possibly uninstall these.

  \item Repositories/PPAs:
    Remote software archives where downloadable packages are listed,
    along with both download information and update information (e.g.
    when the last update was).
    This determines my visible universe of packages that are available
    to download or update with APT.\footnote{%
      There are other packages to download in non-added repositories
      that I can't see, and there lots of other packages that I could
      download source code for and install. But I can't see these or
      interact with them through APT since I haven't added them to my
      source list.
    }
    Adding a repository/PPA will expand the list of APT-downloadable
    packages (without actually downloading or installing anything).

    The configuration file \texttt{/etc/apt/sources.list}
    and files in \texttt{/etc/apt/sources.list.d/}
    have a list of all sources/repositories with available downloads.
    These files can be edited manually or using commands described
    below.

    By having a list pointing to remote sources/repositories with
    downloadable packages/updates and update information,
    it's extremely easy to download packages, query/check for updates,
    and install updates.
    This wouldn't be as easy if we had to downloaded the packages and
    install them from source in one shot, without storing
    \emph{sources}/\emph{repositories}.

    The term ``repositories'' is generally used for official/traditional
    sources, while PPAs refers to ``personal package archives'' which
    are generally smaller in scope and very targeted in the types of
    programs/software contained in them, unlike the broader traditional
    repostories.
    Although in practice, there's no difference for downloading,
    installing, etc.

  \item Local Database of Packages:
    APT keeps a local database of packages along with information about
    whether any updates for my installed packages are available.

  \item Searching all sources/repositories for packages using keywords:
    This queries all the sources/repositories listed in
    \texttt{/etc/apt/sources.list} to see if there are any packages
    whose descriptions involve keywords:
    \lstset{style=log}
    \begin{lstlisting}
apt-cache search [keywords]
    \end{lstlisting}

  \item Adding repositories:
    Can directly edit \texttt{/etc/apt/sources.list} or place a new
    list in \texttt{/etc/apt/sources.list.d/}.
    Alternatively and preferably use
    \begin{lstlisting}
add-apt-repository [repository name]
    \end{lstlisting}
    Note that the repository name might be of the form
    \texttt{ppa:ownername/ppaname}, indicating that it's a PPA rather
    than a big official/traditional repository. Although this
    distinction doesn't really matter.

  \item Updating Sources:
    After adding repositories, update the package lists (the local
    database of downloadable/updatable packages) for all of my
    repositories and check for updates in one shot with
    \begin{lstlisting}
    sudo apt-get update
    \end{lstlisting}
    This will also list out all servers where information is being
    retreived from in the course of updating.

  \item Installing a Package:
    To install a package, use
    \begin{lstlisting}
    sudo apt-get install [packagename]
    \end{lstlisting}
    Will sometimes also install related packages and dependencies
    (prerequisite packages).

    Add \texttt{-s} flag to run a ``simulated'' install.

    Add \texttt{-f} and omit \texttt{[packagename]} if the install
    failed because of dependency issues.
    This will search for any unsatisfied dependences and try to install
    them in an attempt to fix the dependency tree.

  \item Removing a Package and Configuration Files:
    To get rid of a package and its dependencies, use
    \begin{lstlisting}
    sudo apt-get remove [packagename]
    \end{lstlisting}
    Note however that an installed package also often has various
    configuration files and associated directories that won't be needed
    after the package has been uninstalled.
    To remove these \emph{also} (so you don't have to manually delete),
    modify the above command to
    \begin{lstlisting}
    sudo apt-get remove --purge [packagename]
    \end{lstlisting}

  \item Cleaning Up Unused Dependencies:
    Some installed packages were only installed because they were
    dependencies for other packages that might now be uninstalled.
    If there any unused dependencies that aren't associated with an
    installed program still hanging around, use the following command to
    remove them:
    \begin{lstlisting}
    sudo apt-get autoremove
    \end{lstlisting}
    Can also add \texttt{--purge} argument to remove their configuration
    files and associated directories.

  \item Upgrading Packages:
    First, always make sure you did an update before doing an upgrade.
    Next, to replace old packages with their updated selves, run
    \begin{lstlisting}
    sudo apt-get upgrade
    \end{lstlisting}
    The above command takes an installed package, removes it, and
    replaces it with one of the exact same name.
    No new packages installed, no packages uninstalled.
    This can be an issue.

    Sometimes an updated package requires a new dependency or requires
    removing one dependency and replacing it with a different one with a
    different name.
    The above command will not take care of these dependency issues
    since it cannot install or uninstall anything.
    So instead run the following command which can resolve these
    potential dependency issues.
    \begin{lstlisting}
    sudo apt-get dist-upgrade
    \end{lstlisting}
    Of course, this is a little more aggressive and we should use this
    with care probably.

  \item Cleaning up the Cached Downloaded Packages:
    Even after a package is downloaded and installed, the download is
    still cached in case the system needs to reference it.
    They are never automatically deleted even if a package is
    redownloaded and reinstalled after an update. The new download will
    be cached in addition with the old one still there.

    The following command deletes all cached downloads
    \begin{lstlisting}
    sudo apt-get clean
    \end{lstlisting}
    The following command deletes all cached downloads, except the most
    recent for each package. So it just ditches old versions.
    \begin{lstlisting}
    sudo apt-get autoclean
    \end{lstlisting}

  \item Querying Installed Packages:
    To get a list
    \begin{lstlisting}
    sudo dpkg --list
    \end{lstlisting}

  \item Installing \texttt{.deb} Packages:
    Sometimes a software vendor will just supply a deb file.
    After downloading to the current directory, we can install with
    \begin{lstlisting}
    sudo dpkg --install debfile.deb
    \end{lstlisting}
    Note that the \texttt{dpkg} command doesn't resolve dependencies, so
    if there are unmet dependencies, installation will typiclly fail.
    However, it will mark them, and we can use \texttt{apt-get} to fix
    them by running the following command, which will install unmet
    dependencies:
    \begin{lstlisting}
    sudo apt-get install -f
    \end{lstlisting}

  \item Show Dependencies and Reverse Dependencies:
    List all packages listed as a hard dependency, suggestion,
    recommendation, conflict to a given package,
    \begin{lstlisting}
    apt-cache depends [packagename]
    \end{lstlisting}
    List what \emph{depends on} the given package
    \begin{lstlisting}
    apt-cache rdepends [packagename]
    \end{lstlisting}

  \item Show Installed and Available Versions of a Package:
    Often many versions of a package within the repositories, with a
    single default.
    To see the version installed, the candidate to be installed unless
    otherwise specified, and a table of versions, run
    \begin{lstlisting}
    apt-cache policy [packagename]
    \end{lstlisting}


  \item Tracing Package Files:
    To see which files a package installed (not including configuration
    files),
    \begin{lstlisting}
    dpkg -L package
    \end{lstlisting}
    To see what package installed a file, run
    \begin{lstlisting}
    dpkg -S /path/to/file
    \end{lstlisting}

\end{itemize}


\clearpage
\subsubsection{Slurm Scheduler}

Scheduling software for high performance computing clusters.
To run, you need
\begin{itemize}
  \item A job to run (python script, R script, Matlab job, compiled
    executable)
  \item
    A SLURM script (often suffixed \texttt{.cmd}, \texttt{.slurm} or
    \texttt{.sh} by convention but not necessarily)
\end{itemize}
Serial jobs use only a single processor, while parallel jobs use more
than one processor.

\paragraph{Command Line Commands}
Commands:
\lstset{style=bash}
\begin{lstlisting}
sbatch <slurm_script>         # Submit a job (e.g., sbatch job.slurm)
squeue                        # Show jobs in the queue
squeue -u <NetID>             # Show jobs in the queue for a specific user (e.g.,
squeue -u <NetID> --start     # Report the expected start time for pending jobs
squeue -j <JobID>             # Show the nodes allocated to a running job
scancel <JobID>               # Cancel a job (e.g., scancel 2534640)
scontrol show <JobID>         # See detailed info about a job
snodes                        # Show properties of the nodes on a cluster
                              # (e.g., maximum memory)
sinfo                         # Show how nodes are being used
sshare/sprio                  # Show the priority assigned to jobs
smap/sview                    # Graphical display of the queues
slurmtop                      # Text-based view of cluster nodes
scontrol show config          # View default parameter settings

sacct -o MaxVMSizeNode,ReqMem -j <JobID>    # View details about finished jobs.
                                            # Use sacct -e to view list options.


# See all jobs with associated priorities
squeue -o "%.18i %Q %.9q %.8j %.8u %.10a %.2t %.10M %.10L %.6C %R" | more

\end{lstlisting}



\paragraph{Scripts}
More or less Bash scripts (using the scripting syntax built into Bash)
with some extra parameters to help out slurm.
\lstset{style=bash}
\begin{lstlisting}
#!/bin/bash
#SBATCH --job-name=slurm-test    # create a short name for your job
#SBATCH --nodes=1                # node count, how many to claim (>1 for multinode jobs)
                                # If >1, executable must be coded explicitly
                                # to use MPI
#SBATCH --ntasks=1               # total no. of tasks across all nodes; 1 per core by default
                                # Total cores used = nodes * ntasks
#SBATCH --cpus-per-task=1        # cpu-cores per task (>1 for multicore jobs)
                                 # If >1, executable must be coded explicitly
                                 # to use multi-threading (e.g. to use OpenMP)
#SBATCH --mem-per-cpu=4G         # memory per cpu-core (4G is default)
#SBATCH --time=00:01:00          # total run time limit (DAYS-HH:MM:SS)
#SBATCH --mail-type=begin        # send email when job begins
#SBATCH --mail-type=end          # send email when job ends
#SBATCH --mail-user=<YourNetID>@princeton.edu

echo 'Hello world!'
\end{lstlisting}
Note
\begin{itemize}
  \item Make sure your slurm script loads any dependencies or path
    changes (i.e.\ you need python3, so \texttt{module load anaconda3}).

    Do not put the module load modulename command in your shell's
    startup script (e.g., \texttt{.bashrc}) as it can lead to difficult
    to diagnose problems.  Instead, use the module command in your Slurm
    submission scripts and the module will be loaded when the job is
    run.
  \item Make sure you call your executable with its full path or cd to
    the appropriate directory.
\end{itemize}


\paragraph{Output}
As a slurm job runs, unless you redirect output, a file named
\texttt{slurm-jobid.out} will be produced in your home directory.
It contains the output your program would have written to a terminal, if
run interactively.

Local scratch (i.e., /tmp) refers to the local disk physically attached
to each compute node on a cluster. This is the fastest storage available
to a job while it's running, so it's good to write there while a job is
working, and then copy the output from that node to another location
upon completion of the computations, before the job ends, e.g.
\begin{lstlisting}
#!/bin/bash
#SBATCH -N 1
#SBATCH -c 16
#SBATCH -t 1:00:00

export ScratchDir=``/tmp/myjob''
mkdir -p $ScratchDir
./a.out $ScratchDir

cp -r $ScratchDir /tigress/your_netid/
\end{lstlisting}


\paragraph{Iteractive Testing}
For interactive testing on compute nodes, can use \texttt{salloc}, which
takes the same modifiers as follow the \texttt{\#SBATCH} in your SLURM
script. But it instead sends you in an interactive shell to the compute
node once the allocation is granted.
Example
\begin{lstlisting}
salloc --nodes=1 --ntasks=1 --time 00:20:00
\end{lstlisting}
This asks for an allocation of 1 node, 1 task, and 20 minutes. Once it's
granted you'll be in a shell where you can run processes directly that
will be killed after the time elapses.


\paragraph{Easy Parallelization via Array Jobs}
You can write your executable to take as input an argument corresponding
to some index of an array of parameter values, after which the program
executes using that parameter value.
SLURM can be used to execute the program in parallel for each value in
the array.



\clearpage
\subsubsection{Modules}


Your environment is configured in a certain way with particular values
of the environment variables, corresponding to certain settings and
defaults and dependencies.
The \texttt{module} utility is useful for times when we want to
change/configure our environment in a way that makes it easier to use a
particular software package.
\begin{itemize}
  \item \texttt{module avail}:
    Lists all of the available modules that you can optionally load into
    your environment.
  \item \texttt{module load anaconda3}:
      Loads the module anaconda and configures your local environment.

      Then if you install new Python packages or upgrade old ones, when
      you reload the anaconda module, these updates and new packages
      will be there in your local environment.

  \item \texttt{module show <module-name>}:
      Will show you the steps/commands that are executed to set the
      environment, i.e. the sequence of environment variable changes or
      additions.

  \item \texttt{module list}:
    List out which modules are loaded.

  \item \texttt{module unload <modulename>}:
    Unload a module
\end{itemize}
Do not put the module load modulename command in your shell's startup
script (e.g., \texttt{.bashrc}) as it can lead to difficult to diagnose
problems.  Instead, use the module command in your Slurm submission
scripts and the module will be loaded when the job is run.




\clearpage
\subsection{Quick List of Useful Commands}


\begin{lstlisting}
    Quick List of Useful Commands and Utilities
    -------------------------------------------
    which <command>         # show path of command (e.g., which gcc)
    env                     # list all environment variables/settings
    echo $USER              # print contents of shell variable USER
    ehco $PATH              # print contests of shell variable PATH
    history                 # Print list list of recent commands (in .bash_history)


    # Server Commands
    hostname                  # get the name of the machine you are on
    whoami                    # get username of the account
    date                      # get the current date and time
    pwd                       # print working directory
    cat /etc/os-release       # info about operating system
    lscpu                     # info about the CPUs on head node
    who                       # list users on the head node

    # Princeton Server Commands
    snodes                    # info about the compute nodes (7 nodes for myadroit)
    squeue                    # which jobs are running or waiting to run
    qos                       # quality of servce (job partitions and limits)
    slurmtop                  # shows a map of cluster usage
    checkquota                # view your quota and request more space
\end{lstlisting}



\clearpage
\appendix
\section{Princeton Clusters}

\begin{lstlisting}
Nobel
- Good for interactive work
- Two nodes, Davisson and Compton
- No separation into head/login node and compute node

Adroit
- HPC that's useful for bigger job
- Batch submission

Perseus, Tiger, Della, Traverse:
- HPC research clusters with many nodes
- GPFS networked storage between clusters



File System for Tiger Cluster. Same as Perseus, Tiger, Della, Traverse
----------------------------------------------------------------------
/home/mcocci      Store source code, executables, and backed-up files.
/scratch/gpfs     Job output & intermediate files here, "volatile files"
/tigress/mcocci   Insanely large file system for storing final results
                  (non-volatile files). Connected to all clusters.
                  Backed up. But slow to get data here, so don't ever
                  write here directly.

Note that all of these directories are kept on separate disks.

Note that each compute node also has a /scratch directory.

All servers and storage are linked by Omni-Path high speed network.



File System for Adroit Cluster
------------------------------
/home/mcocci      Store source code, executables, and backed-up files.
/scratch/network  Job output & intermediate files here, "volatile files"




Modules
-------
By default, the Princeton server loads old Python when you run
\texttt{python}.
To get the newer Anaconda Python implementation, load the modeule

  module load anaconda3
  conda list

with the last commmand listing all available packages.



To install packages to a given module,

  module load anaconda3
  pip install --user <package>

which installs to ~/.local/lib/python<version>/site-packages





\end{lstlisting}



\end{document}




\end{document}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%% SAMPLE CODE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

    %% VIEW LAYOUT %%

        \layout

    %% LANDSCAPE PAGE %%

        \begin{landscape}
        \end{landscape}

    %% BIBLIOGRAPHIES %%

        \cite{LabelInSourcesFile}  %Use in text; cites
        \citep{LabelInSourcesFile} %Use in text; cites in parens

        \nocite{LabelInSourceFile} % Includes in refs w/o specific citation
        \bibliographystyle{apalike}  % Or some other style

        % To ditch the ``References'' header
        \begingroup
        \renewcommand{\section}[2]{}
        \endgroup

        \bibliography{sources} % where sources.bib has all the citation info

    %% SPACING %%

        \vspace{1in}
        \hspace{1in}

    %% URLS, EMAIL, AND LOCAL FILES %%

      \url{url}
      \href{url}{name}
      \href{mailto:mcocci@raidenlovessusie.com}{name}
      \href{run:/path/to/file.pdf}{name}


    %% INCLUDING PDF PAGE %%

        \includepdf{file.pdf}


    %% INCLUDING CODE %%

        %\verbatiminput{file.ext}
            %   Includes verbatim text from the file

        \texttt{text}
            %   Renders text in courier, or code-like, font

        \matlabcode{file.m}
            %   Includes Matlab code with colors and line numbers

        \lstset{style=bash}
        \begin{lstlisting}
        \end{lstlisting}
            % Inline code rendering


    %% INCLUDING FIGURES %%

        % Basic Figure with size scaling
            \begin{figure}[h!]
               \centering
               \includegraphics[scale=1]{file.pdf}
            \end{figure}

        % Basic Figure with specific height
            \begin{figure}[h!]
               \centering
               \includegraphics[height=5in, width=5in]{file.pdf}
            \end{figure}

        % Figure with cropping, where the order for trimming is  L, B, R, T
            \begin{figure}
               \centering
               \includegraphics[trim={1cm, 1cm, 1cm, 1cm}, clip]{file.pdf}
            \end{figure}

        % Side by Side figures: Use the tabular environment


